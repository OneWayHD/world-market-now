<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Community Board | World Market Now</title>
<link href="../style.css" rel="stylesheet"/>
<style>
    body {
      background-color: #f8fafc;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #0f172a;
      color: #fff;
      text-align: center;
      padding: 10px 0;
    }

    h1 {
      font-size: 24px;
      margin: 0;
      padding: 6px 0;
    }

    main {
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }

    .notice {
      background-color: #fff3cd;
      color: #856404;
      padding: 6px;
      margin-bottom: 8px;
      border: 1px solid #ffeeba;
      border-radius: 4px;
      font-size: 14px;
      text-align: center;
    }

    .notice h3 {
      font-size: 14px;
      margin: 0;
      cursor: pointer;
      font-weight: 600;
    }

    .create-button {
      display: inline-block;
      background-color: #0ea5e9;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      text-decoration: none;
      font-size: 14px;
      margin-top: 6px;
      margin-bottom: 10px;
    }

    .category-tabs {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 6px;
      margin-top: 0;
      margin-bottom: 8px;
    }

    .category-tab {
      font-size: 14px;
      font-weight: 600;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      background-color: #94a3b8;
      color: #fff;
      cursor: pointer;
      text-align: center;
      white-space: nowrap;
      width: 100%;
    }

    .category-tab.active {
      background-color: #0ea5e9;
    }

    .thread-list {
      list-style: none;
      padding: 0;
    }

    .thread-item {
      background-color: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      padding: 12px 16px;
      margin-bottom: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    .thread-item a {
      text-decoration: none;
      font-weight: bold;
      color: #0f172a;
    }

    .thread-meta {
      font-size: 12px;
      color: #718096;
      margin-top: 4px;
    }

    footer {
      text-align: center;
      padding: 20px;
      font-size: 12px;
      color: #666;
    }

    .ad-slot {
      margin-bottom: 12px;
      text-align: center;
    }

    .ad-slot ins {
      display: inline-block;
      width: 100%;
      height: 90px;
    }

    .thread-item ins.adsbygoogle {
      display: block;
      height: 90px !important;
      max-height: 90px !important;
      overflow: hidden;
    }
  </style>
<script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3836772651637182"></script>
</head>
<body>
<header>
<h1>Community Board - W.M.N</h1>
<div style="text-align: center; margin-top: 6px;">
<a href="../index.html" style="color: #0ea5e9; text-decoration: underline; font-size: 14px;">
        ‚Üê Back to Home
      </a>
</div>
</header>
<main>
<div class="notice">
<h3 onclick="toggleGuidelines()">üìå Community Guidelines <span id="guidelines-toggle-symbol">‚ñº</span></h3>
<div id="guidelines-content" style="display: none; margin-top: 8px;">
<ul style="font-size: 13px; padding-left: 20px; text-align: left;">
<li>‚ö† All posts are public and viewable by anyone.</li>
<li>üö´ Offensive, abusive, or inappropriate content is strictly prohibited.</li>
<li>üßæ Posts must be at least 5 characters. Inappropriate posts may be reported or deleted.</li>
<li>üîç Content is reviewed and moderated by administrators.</li>
<li>üë§ Anonymous or temporary IDs are used, but violations may lead to restrictions.</li>
<li>üìÑ See our <a href="../terms.html" target="_blank">Terms of Use</a> for details.</li>
</ul>
</div>
</div>
<a class="create-button" href="bbs-create.html">Ôºã Create New Thread</a>
<div class="category-tabs">
<button class="category-tab active" data-category="Hot">üî• Hot</button>
<button class="category-tab" data-category="Indices &amp; Stocks">Indices &amp; Stocks</button>
<button class="category-tab" data-category="Forex">Forex</button>
<button class="category-tab" data-category="Crypto">Crypto</button>
</div>
<!-- ‚úÖ „Ç´„ÉÜ„Ç¥„É™„Çø„Éñ‰∏ã„ÅÆ„Éê„Éä„ÉºÂ∫ÉÂëäÔºàslot: 1955101499Ôºâ -->
<div class="ad-slot" style="line-height: 0;">
<ins class="adsbygoogle" data-ad-client="ca-pub-3836772651637182" data-ad-slot="1955101499" style="display:inline-block; width:100%; height:90px;"></ins>
</div>
<!-- üßµ „Çπ„É¨„ÉÉ„Éâ‰∏ÄË¶ß -->
<ul class="thread-list" id="thread-list">
<!-- JS„ÅßÁîüÊàê -->
</ul>
<!-- ‚úÖ ÊúÄ‰∏ãÈÉ® fluid Â∫ÉÂëä -->
<div id="bottom-ad-wrapper" style="margin-top: 12px; text-align: center; line-height: 0; min-height: 0;">
<ins class="adsbygoogle" data-ad-client="ca-pub-3836772651637182" data-ad-format="fluid" data-ad-layout-key="-gw-3+1f-3d+2z" data-ad-slot="7970432232" id="bottom-ad" style="display:block; width:100%; height:auto;"></ins>
</div>
</main>

<div class="footer-visitors" style="text-align: center; margin-top: 20px; font-size: 14px;">
  üëÅÔ∏è Now: <span id="visitors-now">--</span> /
  Today: <span id="visitors-today">--</span> /
  Yesterday: <span id="visitors-yesterday">--</span> /
  Record: <span id="visitors-record">--</span>
</div>
<footer>
<div class="footer-links">
<a href="../about.html">About</a>
<a href="../privacy.html">Privacy Policy</a>
<a href="../terms.html">Terms of Use</a>
<a href="../articles.html">Articles</a>
<a href="../contact.html">Contact</a>
</div>
<p style="text-align: center;">
<a href="../index.html" style="text-decoration: none; color: inherit;">
        ¬© 2025 World Market Now
      </a>
</p>
</footer>
<script src="firebase-init.js" type="module"></script>
<script src="bbs.js?v=10003" type="module"></script>
<script>
    function toggleGuidelines() {
      const box = document.getElementById('guidelines-content');
      const symbol = document.getElementById('guidelines-toggle-symbol');
      const isVisible = box.style.display === 'block';
      box.style.display = isVisible ? 'none' : 'block';
      symbol.textContent = isVisible ? '‚ñº' : '‚ñ≤';
    }

    // ‚úÖ IntersectionObserver „Å´„Çà„ÇãÂ∫ÉÂëäÈÅÖÂª∂Ë™≠„ÅøËæº„Åø
    function lazyLoadAds() {
      const adSlots = document.querySelectorAll('ins.adsbygoogle[data-ad-slot]');
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            try {
              (adsbygoogle = window.adsbygoogle || []).push({});
              obs.unobserve(entry.target);
            } catch (e) {
              console.warn("AdSense push failed (bbs)", e);
            }
          }
        });
      }, {
        rootMargin: "100px 0px",
        threshold: 0.01
      });

      adSlots.forEach(ad => observer.observe(ad));
    }

    window.addEventListener("DOMContentLoaded", () => {
      lazyLoadAds();

      setTimeout(() => {
        const ad = document.getElementById("bottom-ad");
        const wrapper = document.getElementById("bottom-ad-wrapper");
        if (ad?.offsetHeight < 30) {
          wrapper.style.display = "none";
        }
      }, 800);
    });
  </script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBegpVTN1QihqgssCKkJDzTG17R8Tl--U8",
    authDomain: "world-market-now.firebaseapp.com",
    projectId: "world-market-now",
    storageBucket: "world-market-now.appspot.com",
    messagingSenderId: "442033538783",
    appId: "1:442033538783:web:fc86ddfe9284fbbd910b6a"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  fetch("https://us-central1-world-market-now.cloudfunctions.net/logVisit", { method: "POST" });

  async function updateVisitorCounter() {
    const today = new Date().toISOString().split("T")[0];
    const yesterday = new Date(Date.now() - 86400000).toISOString().split("T")[0];

    const todaySnap = await getDoc(doc(db, "visits", today));
    const yesterdaySnap = await getDoc(doc(db, "visits", yesterday));
    const recordSnap = await getDoc(doc(db, "visits", "record"));

    document.getElementById("visitors-today").textContent = todaySnap.exists() ? todaySnap.data().count : 0;
    document.getElementById("visitors-yesterday").textContent = yesterdaySnap.exists() ? yesterdaySnap.data().count : 0;
    document.getElementById("visitors-record").textContent = recordSnap.exists() ? recordSnap.data().count : 0;
    document.getElementById("visitors-now").textContent = 1;
  }

  updateVisitorCounter();
</script>
</body>
</html>
